import{d as g,u as V,f as t,c as x,e as o,g as a,w as f,_ as b,a as i,F as S,i as y,o as N}from"./index-BKzxTDxB.js";import{u as T,_ as U,a as $,b as k,T as B}from"./useValidation-CIz5o3yg.js";import{_ as C}from"./GHyperlink.vue_vue_type_script_setup_true_lang-D5OzOVyZ.js";const P={class:"flex justify-center"},R={class:"form-card"},F={class:"text-center"},D=g({__name:"LoginView",setup(L){const c=V(),d=T(),p=y(),{isRequiredString:m,validate:v}=k(),_=t({username:m(),password:m()}),s=t({password:"",username:""}),r=t({password:"",username:""}),n=t(!1),w=async()=>{const l=v(s.value,_.value);if(l.validated){n.value=!0;const e=await c.loginUser(s.value);n.value=!1,e.error?d.error({text:e.error}):(d.success({timeout:6e4,text:"Yeeey"}),p.push("/"))}else r.value={...l.errors}};return(l,e)=>(N(),x(S,null,[o("div",P,[o("div",R,[e[5]||(e[5]=o("div",{class:"form-title"},"Welcome to VPP",-1)),a(U,{name:"username",label:"Username",modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.value.username=u),"data-test-id":"user_name",error:r.value.username},null,8,["modelValue","error"]),a($,{name:"password",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value.password=u),label:"Password","data-test-id":"user_password",error:r.value.password},null,8,["modelValue","error"]),a(b,{submitting:n.value,onClick:w,"data-test-id":"login_button"},{default:f(()=>e[2]||(e[2]=[i(" Login ")])),_:1},8,["submitting"]),o("span",F,[e[4]||(e[4]=i("Do you not have an account? ")),a(C,{href:"/auth/register"},{default:f(()=>e[3]||(e[3]=[i("Register")])),_:1})])])]),a(B)],64))}});export{D as default};
